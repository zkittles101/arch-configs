var marketplace=(()=>{var e,j=Object.create,s=Object.defineProperty,M=Object.defineProperties,D=Object.getOwnPropertyDescriptor,K=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertyNames,U=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable,G=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,m=(e,t)=>{for(var a in t=t||{})$.call(t,a)&&G(e,a,t[a]);if(U)for(var a of U(t))W.call(t,a)&&G(e,a,t[a]);return e},h=(e,t)=>M(e,K(t)),v=(e=>"undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>("undefined"!=typeof require?require:e)[t]}):e)(function(e){if("react"===e)return Spicetify.React;if("react-dom"===e)return Spicetify.ReactDOM;if("undefined"!=typeof require)return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),t=(e,t)=>function(){return t||(0,e[q(e)[0]])((t={exports:{}}).exports,t),t.exports},z=(t,a,n,r)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of q(a))$.call(t,e)||e===n||s(t,e,{get:()=>a[e],enumerable:!(r=D(a,e))||r.enumerable});return t},a=(e,t,a)=>(a=null!=e?j(B(e)):{},z(!t&&e&&e.__esModule?a:s(a,"default",{value:e,enumerable:!0}),e)),n=t({"node_modules/react-simple-code-editor/lib/index.js"(e){"use strict";var n,t,a=e&&e.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),w=e&&e.__assign||function(){return(w=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=e&&e.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var r=Object.getOwnPropertyDescriptor(t,a);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,r)}:function(e,t,a,n){e[n=void 0===n?a:n]=t[a]}),s=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&r(t,e,a);return s(t,e),t},E=e&&e.__rest||function(e,t){var a={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a},C=(Object.defineProperty(e,"__esModule",{value:!0}),i(v("react"))),g="navigator"in global&&/Win/i.test(navigator.platform),y="navigator"in global&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),_="npm__react-simple-code-editor__textarea",O="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.".concat(_,":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .").concat(_," {\n    color: transparent !important;\n  }\n\n  .").concat(_,"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n"),i=(t=C.Component,a(o,t),o.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(o.prototype,"session",{get:function(){return{history:this._history}},set:function(e){this._history=e.history},enumerable:!1,configurable:!0}),o.prototype.render=function(){var t=this,e=this.props,a=e.value,n=e.style,r=e.padding,s=e.highlight,i=e.textareaId,o=e.textareaClassName,l=e.autoFocus,c=e.disabled,u=e.form,p=e.maxLength,d=e.minLength,m=e.name,h=e.placeholder,f=e.readOnly,g=e.required,y=e.onClick,v=e.onFocus,b=e.onBlur,S=e.onKeyUp,k=(e.onKeyDown,e.onValueChange,e.tabSize,e.insertSpaces,e.ignoreTabKey,e.preClassName),e=E(e,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),r={paddingTop:r,paddingRight:r,paddingBottom:r,paddingLeft:r},s=s(a);return C.createElement("div",w({},e,{style:w(w({},N.container),n)}),C.createElement("textarea",{ref:function(e){return t._input=e},style:w(w(w({},N.editor),N.textarea),r),className:_+(o?" ".concat(o):""),id:i,value:a,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:y,onKeyUp:S,onFocus:v,onBlur:b,disabled:c,form:u,maxLength:p,minLength:d,name:m,placeholder:h,readOnly:f,required:g,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),C.createElement("pre",w({className:k,"aria-hidden":"true",style:w(w(w({},N.editor),N.highlight),r)},"string"==typeof s?{dangerouslySetInnerHTML:{__html:s+"<br />"}}:{children:s})),C.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:O}}))},o.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},o);function o(){var f=null!==t&&t.apply(this,arguments)||this;return f.state={capture:!0},f._recordCurrentState=function(){var e,t,a=f._input;a&&(e=a.value,t=a.selectionStart,a=a.selectionEnd,f._recordChange({value:e,selectionStart:t,selectionEnd:a}))},f._getLines=function(e,t){return e.substring(0,t).split("\n")},f._recordChange=function(e,t){void 0===t&&(t=!1);var a=f._history,n=a.stack,a=a.offset,a=(n.length&&-1<a&&(f._history.stack=n.slice(0,a+1),100<(a=f._history.stack.length)&&(f._history.stack=n.slice(n=a-100,a),f._history.offset=Math.max(f._history.offset-n,0))),Date.now());if(t){var n=f._history.stack[f._history.offset];if(n&&a-n.timestamp<3e3){var t=/[^a-z0-9]([a-z0-9]+)$/i,n=null==(n=f._getLines(n.value,n.selectionStart).pop())?void 0:n.match(t),r=null==(r=f._getLines(e.value,e.selectionStart).pop())?void 0:r.match(t);if(null!=n&&n[1]&&null!=(t=null==r?void 0:r[1])&&t.startsWith(n[1]))return void(f._history.stack[f._history.offset]=w(w({},e),{timestamp:a}))}}f._history.stack.push(w(w({},e),{timestamp:a})),f._history.offset++},f._updateInput=function(e){var t=f._input;t&&(t.value=e.value,t.selectionStart=e.selectionStart,t.selectionEnd=e.selectionEnd,f.props.onValueChange(e.value))},f._applyEdits=function(e){var t=f._input,a=f._history.stack[f._history.offset];a&&t&&(f._history.stack[f._history.offset]=w(w({},a),{selectionStart:t.selectionStart,selectionEnd:t.selectionEnd})),f._recordChange(e),f._updateInput(e)},f._undoEdit=function(){var e=f._history,t=e.stack,e=e.offset,t=t[e-1];t&&(f._updateInput(t),f._history.offset=Math.max(e-1,0))},f._redoEdit=function(){var e=f._history,t=e.stack,e=e.offset,a=t[e+1];a&&(f._updateInput(a),f._history.offset=Math.min(e+1,t.length-1))},f._handleKeyDown=function(e){var t,a,n,r,s,i,o,l,c,u,p=f.props,d=p.tabSize,m=p.insertSpaces,h=p.ignoreTabKey,p=p.onKeyDown;p&&(p(e),e.defaultPrevented)||(27===e.keyCode&&e.currentTarget.blur(),t=(p=e.currentTarget).value,a=p.selectionStart,p=p.selectionEnd,n=(m?" ":"\t").repeat(d),9===e.keyCode&&!h&&f.state.capture?(e.preventDefault(),e.shiftKey?(r=(l=f._getLines(t,a)).length-1,s=f._getLines(t,p).length-1,m=t.split("\n").map(function(e,t){return r<=t&&t<=s&&e.startsWith(n)?e.substring(n.length):e}).join("\n"),t!==m&&(u=l[r],f._applyEdits({value:m,selectionStart:null!=u&&u.startsWith(n)?a-n.length:a,selectionEnd:p-(t.length-m.length)}))):a!==p?(i=(l=f._getLines(t,a)).length-1,o=f._getLines(t,p).length-1,u=l[i],f._applyEdits({value:t.split("\n").map(function(e,t){return i<=t&&t<=o?n+e:e}).join("\n"),selectionStart:u&&/\S/.test(u)?a+n.length:a,selectionEnd:p+n.length*(o-i+1)})):(c=a+n.length,f._applyEdits({value:t.substring(0,a)+n+t.substring(p),selectionStart:c,selectionEnd:c}))):8===e.keyCode?(d=a!==p,t.substring(0,a).endsWith(n)&&!d&&(e.preventDefault(),c=a-n.length,f._applyEdits({value:t.substring(0,a-n.length)+t.substring(p),selectionStart:c,selectionEnd:c}))):13===e.keyCode?a===p&&null!=(m=null==(h=f._getLines(t,a).pop())?void 0:h.match(/^\s+/))&&m[0]&&(e.preventDefault(),c=a+(l="\n"+m[0]).length,f._applyEdits({value:t.substring(0,a)+l+t.substring(p),selectionStart:c,selectionEnd:c})):57===e.keyCode||219===e.keyCode||222===e.keyCode||192===e.keyCode?(u=void 0,57===e.keyCode&&e.shiftKey?u=["(",")"]:219===e.keyCode?u=e.shiftKey?["{","}"]:["[","]"]:222===e.keyCode?u=e.shiftKey?['"','"']:["'","'"]:192!==e.keyCode||e.shiftKey||(u=["`","`"]),a!==p&&u&&(e.preventDefault(),f._applyEdits({value:t.substring(0,a)+u[0]+t.substring(a,p)+u[1]+t.substring(p),selectionStart:a,selectionEnd:p+2}))):(y?e.metaKey&&90===e.keyCode:e.ctrlKey&&90===e.keyCode)&&!e.shiftKey&&!e.altKey?(e.preventDefault(),f._undoEdit()):(y?e.metaKey&&90===e.keyCode&&e.shiftKey:g?e.ctrlKey&&89===e.keyCode:e.ctrlKey&&90===e.keyCode&&e.shiftKey)&&!e.altKey?(e.preventDefault(),f._redoEdit()):77!==e.keyCode||!e.ctrlKey||y&&!e.shiftKey||(e.preventDefault(),f.setState(function(e){return{capture:!e.capture}})))},f._handleChange=function(e){var e=e.currentTarget,t=e.value,a=e.selectionStart,e=e.selectionEnd;f._recordChange({value:t,selectionStart:a,selectionEnd:e},!0),f.props.onValueChange(t)},f._history={stack:[],offset:-1},f._input=null,f}e.default=i;var N={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}}}),r=t({"node_modules/prismjs/components/prism-core.js"(e,t){var a=function(l){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,t=0,e={},L={manual:l.Prism&&l.Prism.manual,disableWorkerMessageHandler:l.Prism&&l.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof P?new P(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function a(e,n){var r,t;switch(n=n||{},L.util.type(e)){case"Object":if(t=L.util.objId(e),n[t])return n[t];for(var s in r={},n[t]=r,e)e.hasOwnProperty(s)&&(r[s]=a(e[s],n));return r;case"Array":return(t=L.util.objId(e),n[t])?n[t]:(r=[],n[t]=r,e.forEach(function(e,t){r[t]=a(e,n)}),r);default:return e}},getLanguage:function(e){for(;e;){var t=a.exec(e.className);if(t)return t[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,t){e.className=e.className.replace(RegExp(a,"gi"),""),e.classList.add("language-"+t)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(e){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(e.stack)||[])[1];if(t){var a,n=document.getElementsByTagName("script");for(a in n)if(n[a].src==t)return n[a]}return null}},isActive:function(e,t,a){for(var n="no-"+t;e;){var r=e.classList;if(r.contains(t))return!0;if(r.contains(n))return!1;e=e.parentElement}return!!a}},languages:{plain:e,plaintext:e,text:e,txt:e,extend:function(e,t){var a,n=L.util.clone(L.languages[e]);for(a in t)n[a]=t[a];return n},insertBefore:function(a,e,t,n){var r,s=(n=n||L.languages)[a],i={};for(r in s)if(s.hasOwnProperty(r)){if(r==e)for(var o in t)t.hasOwnProperty(o)&&(i[o]=t[o]);t.hasOwnProperty(r)||(i[r]=s[r])}var l=n[a];return n[a]=i,L.languages.DFS(L.languages,function(e,t){t===l&&e!=a&&(this[e]=i)}),i},DFS:function e(t,a,n,r){r=r||{};var s,i,o,l=L.util.objId;for(s in t)t.hasOwnProperty(s)&&(a.call(t,s,t[s],n||s),i=t[s],"Object"!==(o=L.util.type(i))||r[l(i)]?"Array"!==o||r[l(i)]||(r[l(i)]=!0,e(i,a,s,r)):(r[l(i)]=!0,e(i,a,null,r)))}},plugins:{},highlightAll:function(e,t){L.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,a){var n={callback:a,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};L.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),L.hooks.run("before-all-elements-highlight",n);for(var r,s=0;r=n.elements[s++];)L.highlightElement(r,!0===t,n.callback)},highlightElement:function(e,t,a){var n=L.util.getLanguage(e),r=L.languages[n],s=(L.util.setLanguage(e,n),e.parentElement);s&&"pre"===s.nodeName.toLowerCase()&&L.util.setLanguage(s,n);var i={element:e,language:n,grammar:r,code:e.textContent};function o(e){i.highlightedCode=e,L.hooks.run("before-insert",i),i.element.innerHTML=i.highlightedCode,L.hooks.run("after-highlight",i),L.hooks.run("complete",i),a&&a.call(i.element)}if(L.hooks.run("before-sanity-check",i),(s=i.element.parentElement)&&"pre"===s.nodeName.toLowerCase()&&!s.hasAttribute("tabindex")&&s.setAttribute("tabindex","0"),!i.code)return L.hooks.run("complete",i),void(a&&a.call(i.element));L.hooks.run("before-highlight",i),i.grammar?t&&l.Worker?((n=new Worker(L.filename)).onmessage=function(e){o(e.data)},n.postMessage(JSON.stringify({language:i.language,code:i.code,immediateClose:!0}))):o(L.highlight(i.code,i.grammar,i.language)):o(L.util.encode(i.code))},highlight:function(e,t,a){e={code:e,grammar:t,language:a};if(L.hooks.run("before-tokenize",e),e.grammar)return e.tokens=L.tokenize(e.code,e.grammar),L.hooks.run("after-tokenize",e),P.stringify(L.util.encode(e.tokens),e.language);throw new Error('The language "'+e.language+'" has no grammar.')},tokenize:function(e,t){var a=t.rest;if(a){for(var n in a)t[n]=a[n];delete t.rest}for(var r=new c,s=(T(r,r.head,e),!function e(t,a,n,r,s,i){for(var o in n)if(n.hasOwnProperty(o)&&n[o]){var l=n[o];l=Array.isArray(l)?l:[l];for(var c=0;c<l.length;++c){if(i&&i.cause==o+","+c)return;for(var u,p=l[c],d=p.inside,m=!!p.lookbehind,h=!!p.greedy,f=p.alias,g=(h&&!p.pattern.global&&(u=p.pattern.toString().match(/[imsuy]*$/)[0],p.pattern=RegExp(p.pattern.source,u+"g")),p.pattern||p),y=r.next,v=s;y!==a.tail&&!(i&&v>=i.reach);v+=y.value.length,y=y.next){var b=y.value;if(a.length>t.length)return;if(!(b instanceof P)){var S,k=1;if(h){if(!(S=A(g,v,t,m))||S.index>=t.length)break;var w=S.index,E=S.index+S[0].length,C=v;for(C+=y.value.length;C<=w;)y=y.next,C+=y.value.length;if(C-=y.value.length,v=C,y.value instanceof P)continue;for(var _=y;_!==a.tail&&(C<E||"string"==typeof _.value);_=_.next)k++,C+=_.value.length;k--,b=t.slice(v,C),S.index-=v}else if(!(S=A(g,0,b,m)))continue;var w=S.index,O=S[0],N=b.slice(0,w),x=b.slice(w+O.length),b=v+b.length,I=(i&&b>i.reach&&(i.reach=b),y.prev),N=(N&&(I=T(a,I,N),v+=N.length),R(a,I,k),new P(o,d?L.tokenize(O,d):O,f,O));y=T(a,I,N),x&&T(a,y,x),1<k&&(O={cause:o+","+c,reach:b},e(t,a,n,y.prev,v,O),i&&O.reach>i.reach&&(i.reach=O.reach))}}}}}(e,r,t,r.head,0),r),i=[],o=s.head.next;o!==s.tail;)i.push(o.value),o=o.next;return i},hooks:{all:{},add:function(e,t){var a=L.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=L.hooks.all[e];if(a&&a.length)for(var n,r=0;n=a[r++];)n(t)}},Token:P};function P(e,t,a,n){this.type=e,this.content=t,this.alias=a,this.length=0|(n||"").length}function A(e,t,a,n){e.lastIndex=t;t=e.exec(a);return t&&n&&t[1]&&(e=t[1].length,t.index+=e,t[0]=t[0].slice(e)),t}function c(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function T(e,t,a){var n=t.next,a={value:a,prev:t,next:n};return t.next=a,n.prev=a,e.length++,a}function R(e,t,a){for(var n=t.next,r=0;r<a&&n!==e.tail;r++)n=n.next;(t.next=n).prev=t,e.length-=r}if(l.Prism=L,P.stringify=function t(e,a){if("string"==typeof e)return e;var n;if(Array.isArray(e))return n="",e.forEach(function(e){n+=t(e,a)}),n;var r,s={type:e.type,content:t(e.content,a),tag:"span",classes:["token",e.type],attributes:{},language:a},e=e.alias,i=(e&&(Array.isArray(e)?Array.prototype.push.apply(s.classes,e):s.classes.push(e)),L.hooks.run("wrap",s),"");for(r in s.attributes)i+=" "+r+'="'+(s.attributes[r]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+i+">"+s.content+"</"+s.tag+">"},!l.document)return l.addEventListener&&(L.disableWorkerMessageHandler||l.addEventListener("message",function(e){var e=JSON.parse(e.data),t=e.language,a=e.code,e=e.immediateClose;l.postMessage(L.highlight(a,L.languages[t],t)),e&&l.close()},!1)),L;var n,e=L.util.currentScript();function r(){L.manual||L.highlightAll()}return e&&(L.filename=e.src,e.hasAttribute("data-manual")&&(L.manual=!0)),L.manual||("loading"===(n=document.readyState)||"interactive"===n&&e&&e.defer?document.addEventListener("DOMContentLoaded",r):window.requestAnimationFrame?window.requestAnimationFrame(r):window.setTimeout(r,16)),L}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});void 0!==t&&t.exports&&(t.exports=a),"undefined"!=typeof global&&(global.Prism=a)}}),H=t({"node_modules/classnames/index.js"(e,t){!function(){"use strict";var i={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n,r=typeof a;if("string"==r||"number"==r)e.push(a);else if(Array.isArray(a))!a.length||(n=o.apply(null,a))&&e.push(n);else if("object"==r)if(a.toString===Object.prototype.toString)for(var s in a)i.call(a,s)&&a[s]&&e.push(s);else e.push(a.toString())}}return e.join(" ")}void 0!==t&&t.exports?t.exports=o.default=o:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return o}):window.classNames=o}()}}),t=t({"node_modules/react-dropdown/dist/index.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var a,n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(a in e){var s;Object.prototype.hasOwnProperty.call(e,a)&&((s=r?Object.getOwnPropertyDescriptor(e,a):null)&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(v("react")),d=(t=H())&&t.__esModule?t:{default:t};function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a,n=arguments[t];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f="Select...",t=function(e){var t,a=n;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");function n(e){var t,a;if(this instanceof n)return t=this,(t=!(a=s(n).call(this,e))||"object"!==o(a)&&"function"!=typeof a?u(t):a).state={selected:t.parseValue(e.value,e.options)||{label:void 0===e.placeholder?f:e.placeholder,value:""},isOpen:!1},t.dropdownRef=(0,p.createRef)(),t.mounted=!0,t.handleDocumentClick=t.handleDocumentClick.bind(u(t)),t.fireChangeEvent=t.fireChangeEvent.bind(u(t)),t;throw new TypeError("Cannot call a class as a function")}return a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&h(a,e),a=n,(e=[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&(this.props.value?(e=this.parseValue(this.props.value,this.props.options))!==this.state.selected&&this.setState({selected:e}):this.setState({selected:{label:void 0===this.props.placeholder?f:this.props.placeholder,value:""}}))}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(e){this.props.onFocus&&"function"==typeof this.props.onFocus&&this.props.onFocus(this.state.isOpen),"mousedown"===e.type&&0!==e.button||(e.stopPropagation(),e.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(t,e){var a;if("string"==typeof t)for(var n,r=0,s=e.length;r<s;r++)"group"===e[r].type?(n=e[r].items.filter(function(e){return e.value===t})).length&&(a=n[0]):void 0!==e[r].value&&e[r].value===t&&(a=e[r]);return a||t}},{key:"setValue",value:function(e,t){e={selected:{value:e,label:t},isOpen:!1};this.fireChangeEvent(e),this.setState(e)}},{key:"fireChangeEvent",value:function(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}},{key:"renderOption",value:function(a){var e=a.value,t=(void 0===e&&(e=a.label||a),a.label||a.value||a),n=e===this.state.selected.value||e===this.state.selected;m(r={},"".concat(this.props.baseClassName,"-option"),!0),m(r,a.className,!!a.className),m(r,"is-selected",n);var r=(0,d.default)(r),s=Object.keys(a.data||{}).reduce(function(e,t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(a,!0).forEach(function(e){m(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},e,m({},"data-".concat(t),a.data[t]))},{});return p.default.createElement("div",l({key:e,className:r,onMouseDown:this.setValue.bind(this,e,t),onClick:this.setValue.bind(this,e,t),role:"option","aria-selected":n?"true":"false"},s),t)}},{key:"buildMenu",value:function(){var n=this,e=this.props,t=e.options,r=e.baseClassName,e=t.map(function(e){var t,a;return"group"===e.type?(t=p.default.createElement("div",{className:"".concat(r,"-title")},e.name),a=e.items.map(function(e){return n.renderOption(e)}),p.default.createElement("div",{className:"".concat(r,"-group"),key:e.name,role:"listbox",tabIndex:"-1"},t,a)):n.renderOption(e)});return e.length?e:p.default.createElement("div",{className:"".concat(r,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(e){!this.mounted||this.dropdownRef.current.contains(e.target)||this.state.isOpen&&this.setState({isOpen:!1})}},{key:"isValueSelected",value:function(){return"string"==typeof this.state.selected||""!==this.state.selected.value}},{key:"render",value:function(){var e=this.props,t=e.baseClassName,a=e.controlClassName,n=e.placeholderClassName,r=e.menuClassName,s=e.arrowClassName,i=e.arrowClosed,o=e.arrowOpen,e=e.className,l=this.props.disabled?"Dropdown-disabled":"",c="string"==typeof this.state.selected?this.state.selected:this.state.selected.label,e=(0,d.default)((m(u={},"".concat(t,"-root"),!0),m(u,e,!!e),m(u,"is-open",this.state.isOpen),u)),a=(0,d.default)((m(u={},"".concat(t,"-control"),!0),m(u,a,!!a),m(u,l,!!l),u)),u=(0,d.default)((m(l={},"".concat(t,"-placeholder"),!0),m(l,n,!!n),m(l,"is-selected",this.isValueSelected()),l)),l=(0,d.default)((m(n={},"".concat(t,"-menu"),!0),m(n,r,!!r),n)),n=(0,d.default)((m(r={},"".concat(t,"-arrow"),!0),m(r,s,!!s),r)),s=p.default.createElement("div",{className:u},c),r=this.state.isOpen?p.default.createElement("div",{className:l,"aria-expanded":"true"},this.buildMenu()):null;return p.default.createElement("div",{ref:this.dropdownRef,className:e},p.default.createElement("div",{className:a,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},s,p.default.createElement("div",{className:"".concat(t,"-arrow-wrapper")},o&&i?this.state.isOpen?o:i:p.default.createElement("span",{className:n}))),r)}}])&&r(a.prototype,e),t&&r(a,t),n}(p.Component);t.defaultProps={baseClassName:"Dropdown"},e.default=t}}),V={},J=V,Q={default:()=>function(){return He.default.createElement(ze,null)}};for(e in Q)s(J,e,{get:Q[e],enumerable:!0});var i=a(v("react")),o=a(v("react")),f=(t,e)=>{t=localStorage.getItem(t);if(!t)return e;try{return JSON.parse(t)}catch(e){return t}},Y=e=>{const t=document.querySelector("style.marketplaceSnippets"),a=(t&&t.remove(),document.createElement("style"));e=e.reduce((e,t)=>e=(e+=`/* ${t.title} - ${t.description} */
`)+t.code+`
`,"");a.innerHTML=e,a.classList.add("marketplaceSnippets"),document.head.appendChild(a)},X=(e,t)=>{let a=[];return e&&0<e.length?a=e.map(e=>({name:e.name,url:e.url.startsWith("javascript:")?"":e.url})):a.push({name:t,url:"https://github.com/"+t}),a},Z=()=>{console.log("Resetting Marketplace"),Object.keys(localStorage).forEach(e=>{e.startsWith("marketplace:")&&(localStorage.removeItem(e),console.log("Removed "+e))}),console.log("Marketplace has been reset"),location.reload()},ee=a=>{const e=document.querySelector("link[href='colors.css']"),t=(e&&e.remove(),document.querySelector("style.marketplaceCSS.marketplaceScheme"));if(t&&t.remove(),a){const n=document.createElement("style");n.classList.add("marketplaceCSS"),n.classList.add("marketplaceScheme");let t=":root {";const r=Object.keys(a);r.forEach(e=>{t=(t+=`--spice-${e}: #${a[e]};`)+`--spice-rgb-${e}: ${(e=>{if(3===e.length)e=e.split("").map(e=>e+e).join("");else{if(6!=e.length)throw"Only 3- or 6-digit hex colours are allowed.";if(e.match(/[^0-9a-f]/i))throw"Only hex colours are allowed."}e=e.match(/.{1,2}/g);if(e&&3===e.length)return[parseInt(e[0],16),parseInt(e[1],16),parseInt(e[2],16)];throw"Could not parse hex colour."})(a[e])};`}),t+="}",n.innerHTML=t,document.head.appendChild(n)}else{const s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","colors.css"),s.classList.add("userCSS"),document.head.appendChild(s)}};var g="marketplace:installed-extensions",y="marketplace:installed-snippets",b="marketplace:installed-themes",te="marketplace:active-tab",l="marketplace:tabs",ae="marketplace:sort-by",c="marketplace:theme-installed",ne=[{name:"Extensions",enabled:!0},{name:"Themes",enabled:!0},{name:"Snippets",enabled:!0},{name:"Installed",enabled:!0}],S=100,re="/marketplace",u=a(v("react")),d=a(v("react")),se=a(n()),ie=a(r()),oe=(n=Prism,r=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+r.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+r.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+r.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:r,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css,(r=n.languages.markup)&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css")),a(v("react"))),le="button-module__button___hf2qg_marketplace",ce="button-module__circle___EZ88P_marketplace",k=e=>{var t=e.type||"round";const a=[le];return"circle"===t&&a.push(ce),e.classes&&a.push(...e.classes),oe.default.createElement("button",{className:a.join(" "),onClick:e.onClick,"aria-label":e.label,disabled:e.disabled},e.children)},p=a(v("react")),ue=t=>p.default.createElement("div",null,p.default.createElement("label",{style:{display:"block",textAlign:"center"}},!t.disabled&&p.default.createElement("span",null,t.value.length?"Click to change image":"Click to add image"),p.default.createElement("input",{id:t.id,disabled:t.disabled,style:{display:"none"},type:"file",onChange:e=>{t.onChange(null==(e=e.target.files)?void 0:e[0])}}))),pe=i=>{var e,t="marketplace-customCSS-preview";const[o,a]=d.default.useState("ADD_SNIPPET"!==i.type&&(null==(e=i.content)?void 0:e.item.code)||""),[n,r]=d.default.useState("ADD_SNIPPET"!==i.type&&(null==(e=i.content)?void 0:e.item.title)||""),[l,s]=d.default.useState("ADD_SNIPPET"!==i.type&&(null==(e=i.content)?void 0:e.item.description)||""),[c,u]=d.default.useState("ADD_SNIPPET"!==i.type&&(null==(e=i.content)?void 0:e.item.imageURL)||""),p=()=>n.replace(/\n/g,"").replaceAll(" ","-");return d.default.createElement("div",{id:"marketplace-add-snippet-container"},d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-custom-css"},"Custom CSS"),d.default.createElement("div",{className:"marketplace-customCSS-editor-wrapper"},d.default.createElement(se.default,{value:o,onValueChange:e=>a(e),highlight:e=>(0,ie.highlight)(e,ie.languages.css),textareaId:"marketplace-custom-css",textareaClassName:"snippet-code-editor",readOnly:"VIEW_SNIPPET"===i.type,placeholder:"Input your own custom CSS here! You can find them in the installed tab for management.",style:{}}))),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-customCSS-name-submit"},"Snippet Name"),d.default.createElement("input",{id:"marketplace-customCSS-name-submit",value:n,onChange:e=>{"VIEW_SNIPPET"!==i.type&&r(e.target.value)},placeholder:"Enter a name for your custom snippet."})),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:"marketplace-customCSS-description-submit"},"Snippet Description"),d.default.createElement("input",{id:"marketplace-customCSS-description-submit",value:l,onChange:e=>{"VIEW_SNIPPET"!==i.type&&s(e.target.value)},placeholder:"Enter a description for your custom snippet."})),d.default.createElement("div",{className:"marketplace-customCSS-input-container"},d.default.createElement("label",{htmlFor:t},"Snippet Preview ","VIEW_SNIPPET"!==i.type&&"(optional)"),d.default.createElement(ue,{id:t,disabled:"VIEW_SNIPPET"===i.type,value:c,onChange:async e=>{if("VIEW_SNIPPET"!==i.type&&e)try{n=e;var t=await new Promise((e,t)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=()=>{e(a.result)},a.onerror=e=>{t(e)}});t&&(console.log(t),u(t))}catch(e){console.error(e)}var n}}),c&&d.default.createElement("label",{htmlFor:t,style:{textAlign:"center"}},d.default.createElement("img",{className:"marketplace-customCSS-image-preview",src:c,alt:"Preview"}))),"VIEW_SNIPPET"!==i.type?d.default.createElement(k,{onClick:()=>{var e=p(),t=l.trim(),a="marketplace:installed:snippet:"+e;if(f(a)&&"EDIT_SNIPPET"!==i.type)Spicetify.showNotification("That name is already taken!");else{if(console.log("Installing snippet: "+e),i.content&&i.content.item.title!==e){console.log("Deleting outdated snippet: "+i.content.item.title),localStorage.removeItem("marketplace:installed:snippet:"+i.content.item.title);const s=f(y,[]);var n=s.filter(e=>{return e!=="marketplace:installed:snippet:"+(null==(e=i.content)?void 0:e.item.title)});localStorage.setItem(y,JSON.stringify(n))}localStorage.setItem(a,JSON.stringify({title:e,code:o,description:t,imageURL:c,custom:!0}));const r=f(y,[]);-1===r.indexOf(a)&&(r.push(a),console.log(r),localStorage.setItem(y,JSON.stringify(r)));n=r.map(e=>f(e));Y(n),Spicetify.PopupModal.hide(),"EDIT_SNIPPET"===i.type&&location.reload()}},disabled:!p()||!o.replace(/\n/g,"\\n")},"Save CSS"):d.default.createElement(d.default.Fragment,null))},w=a(v("react")),de=()=>w.default.createElement("div",{id:"marketplace-reload-container"},w.default.createElement("p",null,"A page reload is required to complete this operation."),w.default.createElement("div",{className:"marketplace-reload-modal__button-container"},w.default.createElement(k,{onClick:()=>{Spicetify.PopupModal.hide(),location.reload()}},"Reload now"),w.default.createElement(k,{onClick:()=>{Spicetify.PopupModal.hide()}},"Reload later"))),E=a(v("react")),C=a(v("react")),_=a(v("react")),me="toggle-module__toggle-wrapper___ocE5z_marketplace",he="toggle-module__disabled___OYAYf_marketplace",fe="toggle-module__toggle-input___ceLM4_marketplace",ge="toggle-module__toggle-indicator-wrapper___6Lcp0_marketplace",ye="toggle-module__toggle-indicator___nCxwE_marketplace",ve=e=>{var t="toggle:"+e.storageKey;const a=[me];return!1===e.clickable&&a.push(he),_.default.createElement("label",{className:a.join(" ")},_.default.createElement("input",{className:fe,type:"checkbox",checked:e.enabled,"data-storage-key":e.storageKey,id:t,title:"Toggle for "+e.storageKey,onChange:e.onChange}),_.default.createElement("span",{className:ge},_.default.createElement("span",{className:ye})))},O=a=>{var e="toggle:"+a.storageKey,t=!!a.modalConfig.visual[a.storageKey];return C.default.createElement("div",{className:"setting-row"},C.default.createElement("label",{htmlFor:e,className:"col description"},a.name),C.default.createElement("div",{className:"col action"},C.default.createElement(ve,{name:a.name,storageKey:a.storageKey,enabled:t,onChange:e=>{var t=e.target.checked,e=e.target.dataset.storageKey;a.modalConfig.visual[e]=t,console.log(`toggling ${e} to `+t),localStorage.setItem("marketplace:"+e,String(t)),a.updateConfig(a.modalConfig)}})))},N=a(v("react")),be=n=>{var e="toggle:"+n.name;const t=n.modalConfig.tabs.reduce((e,t,a)=>t.name===n.name?a:e,-1);var a=n.modalConfig.tabs[t]["enabled"];function r(e,t){console.log({currPos:e,dir:t});var t=e+t,a=n.modalConfig.tabs[t];n.modalConfig.tabs[t]=n.modalConfig.tabs[e],n.modalConfig.tabs[e]=a,localStorage.setItem(l,JSON.stringify(n.modalConfig.tabs)),n.updateConfig(n.modalConfig)}return N.default.createElement("div",{className:"setting-row"},N.default.createElement("label",{htmlFor:e,className:"col description"},n.name),N.default.createElement("div",{className:"col action"},N.default.createElement("button",{title:"Move up",className:"arrow-btn",onClick:()=>r(t,-1)},N.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:String(Spicetify.SVGIcons["chart-up"])}})),N.default.createElement("button",{title:"Move down",className:"arrow-btn",onClick:()=>r(t,1)},N.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"currentColor",dangerouslySetInnerHTML:{__html:String(Spicetify.SVGIcons["chart-down"])}})),N.default.createElement(ve,{name:n.name,storageKey:"tab:"+n.name,clickable:"Extensions"!==n.name,enabled:a,onChange:e=>{console.log({e:e}),n.modalConfig.tabs[t].enabled=e.target.checked,localStorage.setItem(l,JSON.stringify(n.modalConfig.tabs)),n.updateConfig(n.modalConfig)}})))},Se=({CONFIG:e,updateAppConfig:t})=>{const[a,n]=E.default.useState(m({},e)),r=e=>{t(m({},e)),n(m({},e))},s=document.querySelector("body > generic-modal button.main-trackCreditsModal-closeBtn"),i=document.querySelector("body > generic-modal > div");return s&&i&&(s.onclick=()=>location.reload(),s.setAttribute("style","cursor: pointer;"),i.onclick=e=>{e.target===i&&location.reload()}),E.default.createElement("div",{id:"marketplace-config-container"},E.default.createElement("h2",null,"Options"),E.default.createElement(O,{name:"Stars count",storageKey:"stars",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Tags",storageKey:"tags",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Hide installed when browsing",storageKey:"hideInstalled",modalConfig:a,updateConfig:r}),E.default.createElement(O,{name:"Shift colors every minute",storageKey:"colorShift",modalConfig:a,updateConfig:r}),E.default.createElement("h2",null,"Tabs"),E.default.createElement("div",{className:"tabs-container"},a.tabs.map(({name:e},t)=>E.default.createElement(be,{key:t,name:e,modalConfig:a,updateConfig:r}))),E.default.createElement("h2",null,"Reset"),E.default.createElement("div",{className:"setting-row"},E.default.createElement("label",{className:"col description"},"Uninstall all extensions and themes, and reset preferences"),E.default.createElement("div",{className:"col action"},E.default.createElement(k,{onClick:Z},"Reset"))))},x=(e,t,a,n)=>{e=((e,t,a,n)=>{switch(e){case"ADD_SNIPPET":return{title:"Add Snippet",content:u.default.createElement(pe,{type:e}),isLarge:!0};case"EDIT_SNIPPET":return{title:"Edit Snippet",content:u.default.createElement(pe,{type:e,content:n}),isLarge:!0};case"VIEW_SNIPPET":return{title:"View Snippet",content:u.default.createElement(pe,{type:e,content:n}),isLarge:!0};case"RELOAD":return{title:"Reload",content:u.default.createElement(de,null),isLarge:!1};case"SETTINGS":return{title:"Settings",content:u.default.createElement(Se,{CONFIG:t,updateAppConfig:a}),isLarge:!0};default:return{title:"",content:u.default.createElement("div",null),isLarge:!1}}})(e,t,a,n),Spicetify.PopupModal.display(e)},ke=[{title:"Fix 'Episodes' Icon",description:"Fix the color of the Episodes icon",code:".main-yourEpisodesButton-yourEpisodesIcon {\n  background: var(--spice-text);\n}\n.main-yourEpisodesButton-yourEpisodesIcon path {\n  fill: var(--spice-player);\n  opacity: 0.7;\n}",preview:"src/assets/icon.svg"},{title:"Fix 'Liked' Icon",description:"Fix the colours of the Liked icon in sidebar",code:".main-likedSongsButton-likedSongsIcon {\n  color: var(--spice-sidebar);\n  background: var(--spice-text);\n}",preview:"https://placekitten.com/150/150"},{title:"Fix 'Made For You' Icon",description:"Fix the colours of the Made For You icon",code:".utp540VMXpC3bYIxo9wy {\n  color: var(--spice-sidebar);\n  background: var(--spice-text);\n  opacity: 1;\n}\n.t6d9Hf7maqFPHp1Y02VR {\n  color: var(--spice-text);\n}",preview:"https://placekitten.com/200/200"},{title:"Hide Upgrade Button",description:"Makes the upgrade button hidden",code:".main-topBar-UpgradeButton {\n  display: none;\n}",preview:"https://placekitten.com/250/250"},{title:"Auto-hide Friends",description:"Collapse the friends activity sidebar on small screens",code:"[aria-label='Friend Activity'] {\n  transition: width 0.3s;\n}\n@media screen and (max-width: 1200px) {\n  [aria-label='Friend Activity'] {\n    width: 0;\n  }\n  [aria-label='Friend Activity'] .LayoutResizer__resize-bar {\n    display: none;\n  }\n}",preview:"resources/assets/snippets/auto-hide-friends.png"},{title:"Smooth Reveal Playlist Gradient",description:"Reveals the playlist gradient header gradient with a fade in effect",code:".main-entityHeader-overlay,\n.main-actionBarBackground-background,\n.main-entityHeader-overlay,\n.main-entityHeader-backgroundColor {\n  -webkit-transition: 3s;\n}",preview:"https://placekitten.com/300/300"},{title:"Fix progress bar displacement",description:"Fix the progress bar displacement when listening on different devices",code:".main-connectBar-connectBar {\n  overflow: visible !important;\n  --triangle-position: 147px !important;\n  align-items: unset !important;\n  height: 0px !important;\n  position: absolute !important;\n  left: 80% !important;\n  display: flex !important;\n  bottom: 2% !important;\n  padding: unset !important;\n}",preview:"https://placekitten.com/350/350"},{title:"Fix playlist arrows",description:"Fixes the opened and closed orientation of the playlist folder arrows",code:".main-rootlist-expandArrow {\n  -webkit-transform: rotate(-90deg) !important;\n  transform: rotate(-90deg) !important;\n}\n.main-rootlist-expandArrow:hover {\n  -webkit-transform: rotate(-90deg) !important;\n  transform: rotate(-90deg) !important;\n}\n.qAAhQw9dXNB7DbPgDDxy {\n  -webkit-transform: rotate(0deg) !important;\n  transform: rotate(0deg) !important;\n}\n.qAAhQw9dXNB7DbPgDDxy:hover {\n  -webkit-transform: rotate(0deg) !important;\n  transform: rotate(0deg) !important;\n}",preview:"resources/assets/snippets/fix-playlist-arrows.png"},{title:"Fix main view width",description:"Makes main view fill up all available space",code:".contentSpacing {\n  max-width: 100% !important;\n}",preview:"resources/assets/snippets/fix-main-view-width.png"},{title:"Left aligned heart icons",description:"Moves the heart icon to the left side of the track title in track views",code:".main-trackList-rowSectionStart {\n  margin-left: 38px !important;\n}\n.main-addButton-button.main-trackList-rowHeartButton,\n.main-addButton-button.main-trackList-rowHeartButton {\n  position: absolute !important;\n  left: 48px !important;\n}",preview:"https://placekitten.com/400/400"},{title:"Hover Panels",description:"Have your playlist, friend activity, and controls bar be hoverable.",code:".Root__nav-bar {\n  position: absolute;\n  width: 40px;\n  opacity: 0;\n  bottom: 0;\n  left: 0;\n  top: 0;\n  z-index: 1;\n}\nnav.Root__nav-bar:hover {\n  position: inherit;\n  width: 225px;\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n}\n.LayoutResizer__resize-bar {\n  cursor: none;\n}\n.Root__top-bar {\n  opacity: 0;\n  transition: visibility 5s, opacity 1s linear;\n}\n.Root__top-bar:hover {\n  transition-delay: 0.5s;\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n}\n.main-topBar-container {\n  -webkit-padding-end: 32px;\n  padding: 16px 85px;\n  padding-inline-end: 32px;\n  max-width: none;\n}\naside.main-buddyFeed-buddyFeedRoot:hover {\n  position: inherit;\n  width: var(--buddy-feed-width);\n  opacity: 1;\n  transition: visibility 5s, opacity 0.5s linear;\n  left: 0;\n}\naside.main-buddyFeed-buddyFeedRoot {\n  position: absolute;\n  width: 65px;\n  opacity: 0;\n  bottom: 0;\n  left: -30px;\n  top: 0;\n  z-index: 1;\n}",preview:"https://placekitten.com/450/450"}];async function we(e,t,a){var n=window.sessionStorage.getItem(e+"-"+t);const r=window.sessionStorage.getItem("noManifests");if(n)return JSON.parse(n);const s=`https://raw.githubusercontent.com/${e}/${t}/${a}/manifest.json`;if(null!=r&&r.includes(s))return null;n=await fetch(s).then(e=>e.json()).catch(()=>{var n=[s],r="noManifests";n&&null!=n&&n.forEach(e=>{r=r||n.user+"-"+n.repo;var t=window.sessionStorage.getItem(r);const a=t?JSON.parse(t):[];a.push(e),window.sessionStorage.setItem(r,JSON.stringify(a))})});return n&&window.sessionStorage.setItem(e+"-"+t,JSON.stringify(n)),n}var I=a(v("react")),Ee=class extends I.default.Component{render(){return I.default.createElement("div",{onClick:this.props.onClick},I.default.createElement("p",{style:{fontSize:100,lineHeight:"65px"}},"»"),I.default.createElement("span",{style:{fontSize:20}},"Load more"))}},L=a(v("react")),Ce=()=>L.default.createElement("svg",{width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},L.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},L.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"0s"}),L.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"0s"})),L.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},L.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-0.5s"}),L.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-0.5s"}))),_e=a(v("react")),Oe=()=>_e.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 24 24","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},_e.default.createElement("path",{d:"M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z",fill:"currentColor"})),P=a(v("react")),Ne=a(t()),xe=t=>{var e=t.sortBoxOptions.map(e=>({value:e.key,label:e.value})),a=t.sortBoxOptions.find(t.sortBySelectedFn);return P.default.createElement("div",{className:"marketplace-sortBox"},P.default.createElement("div",{className:"marketplace-sortBox-header"},P.default.createElement("div",{className:"marketplace-sortBox-header-title"}),P.default.createElement(Ne.default,{placeholder:"Select an option",options:e,value:null==a?void 0:a.key,onChange:e=>{t.onChange(e.value)}})))},A=a(v("react")),Ie=a(v("react-dom")),Le=a(t()),Pe=class extends A.default.Component{constructor(e){super(e)}render(){return this.props.item.enabled?A.default.createElement("li",{className:"marketplace-tabBar-headerItem","data-tab":this.props.item.value,onClick:e=>{e.preventDefault(),this.props.switchTo(this.props.item.key)}},A.default.createElement("a",{"aria-current":"page",className:"marketplace-tabBar-headerItemLink "+(this.props.item.active?"marketplace-tabBar-active":""),draggable:"false",href:""},A.default.createElement("span",{className:"main-type-mestoBold"},this.props.item.value))):null}},Ae=A.default.memo(function({items:e,switchTo:t}){e=e.map(e=>({value:e.key,label:e.value}));return A.default.createElement("li",{className:"marketplace-tabBar-headerItem"},A.default.createElement(Le.default,{className:"main-type-mestoBold",options:e,value:"More",placeholder:"More",onChange:e=>{t(e.value)}}))}),Te=({children:e})=>e?Ie.default.createPortal(A.default.createElement("div",{className:"main-topBar-topbarContent"},e),document.querySelector(".main-topBar-topbarContentWrapper")):null,Re=e=>{const t=document.querySelector(".Root__main-view .os-resize-observer-host");if(!t)return null;const[a,n]=(0,A.useState)(t.clientWidth),r=()=>n(t.clientWidth);return(0,A.useEffect)(()=>{const e=new ResizeObserver(r);return e.observe(t),()=>{e.disconnect()}},[r]),A.default.createElement(Te,null,A.default.createElement(Fe,{windowSize:a,links:e.links,activeLink:e.activeLink,switchCallback:e.switchCallback}))},Fe=A.default.memo(function({links:e,activeLink:a,switchCallback:t,windowSize:n=1/0}){const r=A.default.useRef(null),[s,i]=(0,A.useState)([]),[o,l]=(0,A.useState)(0),[c,u]=(0,A.useState)([]),p=e.map(({name:e,enabled:t})=>{return{key:e,value:e,active:e===a,enabled:t}});return(0,A.useEffect)(()=>{r.current&&l(r.current.clientWidth)},[n]),(0,A.useEffect)(()=>{if(r.current){const t=Array.from(r.current.children);var e=t.map(e=>e.clientWidth);i(e)}},[e]),(0,A.useEffect)(()=>{if(r.current)if(s.reduce((e,t)=>e+t,0)<=o)u([]);else{var e=Math.max(...s);const n=[];let a=e;s.forEach((e,t)=>{o>=a+e?a+=e:n.push(t)}),u(n)}},[o,s]),A.default.createElement("nav",{className:"marketplace-tabBar marketplace-tabBar-nav"},A.default.createElement("ul",{className:"marketplace-tabBar-header",ref:r},p.filter((e,t)=>!c.includes(t)).map(e=>A.default.createElement(Pe,{key:e.key,item:e,switchTo:t})),c.length||0===s.length?A.default.createElement(Ae,{items:c.map(e=>p[e]).filter(e=>e),switchTo:t}):null))}),T=a(v("react")),je=a(v("react")),Me=()=>je.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 448 512","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},je.default.createElement("path",{d:"M53.21 467c1.562 24.84 23.02 45 47.9 45h245.8c24.88 0 46.33-20.16 47.9-45L416 128H32L53.21 467zM432 32H320l-11.58-23.16c-2.709-5.42-8.25-8.844-14.31-8.844H153.9c-6.061 0-11.6 3.424-14.31 8.844L128 32H16c-8.836 0-16 7.162-16 16V80c0 8.836 7.164 16 16 16h416c8.838 0 16-7.164 16-16V48C448 39.16 440.8 32 432 32z",fill:"currentColor"})),De=a(v("react")),Ke=()=>De.default.createElement("svg",{role:"img",width:"16",height:"16",viewBox:"0 0 512 512","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg"},De.default.createElement("path",{d:"M480 352h-133.5l-45.25 45.25C289.2 409.3 273.1 416 256 416s-33.16-6.656-45.25-18.75L165.5 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h448c17.67 0 32-14.33 32-32v-96C512 366.3 497.7 352 480 352zM432 456c-13.2 0-24-10.8-24-24c0-13.2 10.8-24 24-24s24 10.8 24 24C456 445.2 445.2 456 432 456zM233.4 374.6C239.6 380.9 247.8 384 256 384s16.38-3.125 22.62-9.375l128-128c12.49-12.5 12.49-32.75 0-45.25c-12.5-12.5-32.76-12.5-45.25 0L288 274.8V32c0-17.67-14.33-32-32-32C238.3 0 224 14.33 224 32v242.8L150.6 201.4c-12.49-12.5-32.75-12.5-45.25 0c-12.49 12.5-12.49 32.75 0 45.25L233.4 374.6z",fill:"currentColor"})),qe=a(v("react")),Ue=e=>{return qe.default.createElement("div",{className:"marketplace-card__authors"},e.authors.map((e,t)=>qe.default.createElement("a",{title:e.name,className:"marketplace-card__author",href:e.url,draggable:"false",dir:"auto",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),key:t},e.name)))},R=a(v("react")),Be=a=>{const[e,t]=R.default.useState(!1);var n=e=>e.reduce((e,t)=>(!a.showTags&&"external JS"!==t||e.push(R.default.createElement("li",{className:"marketplace-card__tag",draggable:!1,"data-tag":t},t)),e),[]),r=a.tags.slice(0,4),s=a.tags.slice(4);return R.default.createElement("div",{className:"marketplace-card__tags-container"},R.default.createElement("ul",{className:"marketplace-card__tags"},n(r),s.length&&e?n(s):null),s.length&&!e?R.default.createElement("button",{className:"marketplace-card__tags-more-btn",onClick:e=>{e.stopPropagation(),t(!0)}},"..."):null)},$e=class extends T.default.Component{constructor(e){super(e),this.menuType=Spicetify.ReactComponent.Menu;var t,a="snippet"===e.type?"snippet:":`${e.item.user}/${e.item.repo}/`;let n="";"snippet"===e.type?n=e.item.title.replaceAll(" ","-"):"theme"===e.type?n=(null==(t=e.item.manifest)?void 0:t.usercss)||"":"extension"===e.type&&(n=(null==(t=e.item.manifest)?void 0:t.main)||""),this.localStorageKey="marketplace:installed:"+a+n,Object.assign(this,e),this.tags=e.item.tags||[],e.item.include&&this.tags.push("external JS"),this.state={installed:null!==localStorage.getItem(this.localStorageKey),stars:this.props.item.stars||0,tagsExpanded:!1}}isInstalled(){return null!==localStorage.getItem(this.localStorageKey)}async componentDidMount(){var e;"Installed"===this.props.CONFIG.activeTab&&this.props.CONFIG.visual.stars&&"snippet"!==this.props.type&&(e=`https://api.github.com/repos/${this.props.item.user}/`+this.props.item.repo,e=await fetch(e).then(e=>e.json()),this.state.stars!==e.stargazers_count&&this.setState({stars:e.stargazers_count},()=>{console.log(`Stars updated to: ${this.state.stars}; updating localstorage.`),this.installExtension()}))}buttonClicked(){var e,t;"extension"===this.props.type?(this.isInstalled()?(console.log("Extension already installed, removing"),this.removeExtension()):this.installExtension(),x("RELOAD")):"theme"===this.props.type?(t=(e=localStorage.getItem("marketplace:theme-installed"))?f(e,{}):{},console.log(t),console.log(e),this.isInstalled()?(console.log("Theme already installed, removing"),this.removeTheme(this.localStorageKey)):(this.removeTheme(),this.installTheme()),(null!=(e=this.props.item.manifest)&&e.include||t.include)&&x("RELOAD")):"snippet"===this.props.type?this.isInstalled()?(console.log("Snippet already installed, removing"),this.removeSnippet()):this.installSnippet():console.error("Unknown card type")}installExtension(){var e;console.log("Installing extension "+this.localStorageKey),localStorage.setItem(this.localStorageKey,JSON.stringify({manifest:null==(e=this.props.item)?void 0:e.manifest,type:this.props.type,title:this.props.item.title,subtitle:this.props.item.subtitle,authors:this.props.item.authors,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,imageURL:this.props.item.imageURL,extensionURL:this.props.item.extensionURL,readmeURL:this.props.item.readmeURL,stars:this.state.stars}));const t=f(g,[]);-1===t.indexOf(this.localStorageKey)&&(t.push(this.localStorageKey),localStorage.setItem(g,JSON.stringify(t))),console.log("Installed"),this.setState({installed:!0})}removeExtension(){if(localStorage.getItem(this.localStorageKey)){console.log("Removing extension "+this.localStorageKey),localStorage.removeItem(this.localStorageKey);const t=f(g,[]);var e=t.filter(e=>e!==this.localStorageKey);localStorage.setItem(g,JSON.stringify(e)),console.log("Removed"),this.setState({installed:!1})}}async installTheme(){var e;console.log("Installing theme "+this.localStorageKey);let t={};if(this.props.item.schemesURL){const r=await fetch(this.props.item.schemesURL);var a=await r.text();t=(e=>{const a={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/},n={},t=e.split(/[\r\n]+/);let r=null;return t.forEach(function(e){var t;a.comment.test(e)||(a.param.test(e)?(t=e.match(a.param),r?n[r][t[1]]=t[2]:n[t[1]]=t[2]):a.section.test(e)?(t=e.match(a.section),n[t[1]]={},r=t[1]):0==e.length&&r&&(r=null))}),n})(a)}a=Object.keys(t)[0],console.log(t,a),a=a||null;localStorage.setItem(this.localStorageKey,JSON.stringify({manifest:null==(e=this.props.item)?void 0:e.manifest,type:this.props.type,title:this.props.item.title,subtitle:this.props.item.subtitle,authors:this.props.item.authors,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,imageURL:this.props.item.imageURL,extensionURL:this.props.item.extensionURL,readmeURL:this.props.item.readmeURL,stars:this.state.stars,tags:this.tags,cssURL:this.props.item.cssURL,schemesURL:this.props.item.schemesURL,include:this.props.item.include,schemes:t,activeScheme:a}));const n=f(b,[]);-1===n.indexOf(this.localStorageKey)&&(n.push(this.localStorageKey),localStorage.setItem(b,JSON.stringify(n)),localStorage.setItem(c,this.localStorageKey)),console.log("Installed"),this.props.item.include||(this.fetchAndInjectUserCSS(this.localStorageKey),this.props.updateActiveTheme(this.localStorageKey),this.props.updateColourSchemes(t,a)),this.setState({installed:!0})}removeTheme(t){var e=(t=t||localStorage.getItem(c))&&localStorage.getItem(t);if(t&&e){console.log("Removing theme "+t),localStorage.removeItem(t),localStorage.removeItem(c);const a=f(b,[]);e=a.filter(e=>e!==t);localStorage.setItem(b,JSON.stringify(e)),console.log("Removed"),this.fetchAndInjectUserCSS(null),this.props.updateActiveTheme(null),this.props.updateColourSchemes(null,null),this.setState({installed:!1})}}installSnippet(){console.log("Installing snippet "+this.localStorageKey),localStorage.setItem(this.localStorageKey,JSON.stringify({code:this.props.item.code,title:this.props.item.title,description:this.props.item.description,imageURL:this.props.item.imageURL}));const e=f(y,[]);-1===e.indexOf(this.localStorageKey)&&(e.push(this.localStorageKey),localStorage.setItem(y,JSON.stringify(e)));var t=e.map(e=>f(e));Y(t),this.setState({installed:!0})}removeSnippet(){localStorage.removeItem(this.localStorageKey);const e=f(y,[]),t=e.filter(e=>e!==this.localStorageKey);localStorage.setItem(y,JSON.stringify(t));var a=t.map(e=>f(e));Y(a),this.setState({installed:!1})}async fetchAndInjectUserCSS(e){try{var t=e?await(async e=>{if(!e.cssURL)throw new Error("No CSS URL provided");const t=-1<e.cssURL.indexOf("raw.githubusercontent.com")?`https://cdn.jsdelivr.net/gh/${e.user}/${e.repo}@${e.branch}/`+e.manifest.usercss:e.cssURL;var a,n=t.replace("/user.css","/assets/");console.log("Parsing CSS: ",t);let r=await fetch(t+"?time="+Date.now()).then(e=>e.text());for(const s of r.matchAll(new RegExp(`url\\(['|"](?<path>.+?)['|"]\\)`,"gm"))||[]){const i=null==(a=null==s?void 0:s.groups)?void 0:a.path;!i||i.startsWith("http")||i.startsWith("data")||(a=n+i.replace(/\.\//g,""),r=r.replace(i,a))}return r})(this.props.item):void 0;try{const a=document.querySelector("link[href='user.css']"),n=(a&&a.remove(),document.querySelector("style.marketplaceCSS.marketplaceUserCSS"));if(n&&n.remove(),t){const r=document.createElement("style");r.classList.add("marketplaceCSS"),r.classList.add("marketplaceUserCSS"),r.innerHTML=t,document.head.appendChild(r)}else{const s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href","user.css"),s.classList.add("userCSS"),document.head.appendChild(s)}}catch(e){console.warn(e)}}catch(e){console.warn(e)}}openReadme(){var e;null!=(e=this.props.item)&&e.manifest&&null!=(e=null==(e=this.props.item)?void 0:e.manifest)&&e.readme?Spicetify.Platform.History.push({pathname:re+"/readme",state:{data:{title:this.props.item.title,user:this.props.item.user,repo:this.props.item.repo,branch:this.props.item.branch,readmeURL:this.props.item.readmeURL}}}):Spicetify.showNotification("No page was found")}render(){var e,t=this.isInstalled();if("Installed"===this.props.CONFIG.activeTab&&!t)return console.log("Card item not installed"),null;const a=["main-card-card","marketplace-card--"+this.props.type],n=(t&&a.push("marketplace-card--installed"),[]);return"snippet"!==this.props.type&&this.props.visual.stars&&n.push("★ "+this.state.stars),T.default.createElement("div",{className:a.join(" "),onClick:()=>{if("snippet"===this.props.type){var e=this.props.item.title.replace(/\n/g,"");if(null!=(e=f("marketplace:installed:snippet:"+e))&&e.custom)return x("EDIT_SNIPPET",void 0,void 0,this.props);x("VIEW_SNIPPET",void 0,void 0,this.props)}else this.openReadme()}},T.default.createElement("div",{className:"main-card-draggable",draggable:"true"},T.default.createElement("div",{className:"main-card-imageContainer"},T.default.createElement("div",{className:"main-cardImage-imageWrapper"},T.default.createElement("div",null,T.default.createElement("img",{alt:"","aria-hidden":"false",draggable:"false",loading:"lazy",src:this.props.item.imageURL,className:"main-image-image main-cardImage-image",onError:e=>{e.currentTarget.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII"),null!=(e=e.currentTarget.closest(".main-cardImage-imageWrapper"))&&e.classList.add("main-cardImage-imageWrapper--error")}})))),T.default.createElement("div",{className:"main-card-cardMetadata"},T.default.createElement("a",{draggable:"false",title:"snippet"===this.props.type?this.props.item.title:null==(e=this.props.item.manifest)?void 0:e.name,className:"main-cardHeader-link",dir:"auto",href:"snippet"!==this.props.type?`https://github.com/${this.props.item.user}/`+this.props.item.repo:"https://github.com/spicetify/spicetify-marketplace/blob/main/resources/snippets.json",target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation()},T.default.createElement("div",{className:"main-cardHeader-text main-type-balladBold"},this.props.item.title)),T.default.createElement("div",{className:"main-cardSubHeader-root main-type-mestoBold marketplace-cardSubHeader"},this.props.item.authors&&T.default.createElement(Ue,{authors:this.props.item.authors}),T.default.createElement("span",null,n.join(" ‒ "))),T.default.createElement("p",{className:"marketplace-card-desc"},"snippet"===this.props.type?this.props.item.description:null==(e=this.props.item.manifest)?void 0:e.description),this.tags.length?T.default.createElement("div",{className:"marketplace-card__bottom-meta main-type-mestoBold"},T.default.createElement(Be,{tags:this.tags,showTags:this.props.CONFIG.visual.tags})):null,t&&T.default.createElement("div",{className:"marketplace-card__bottom-meta main-type-mestoBold"},"✓ Installed"),T.default.createElement("div",{className:"main-card-PlayButtonContainer"},T.default.createElement(k,{classes:["marketplace-installButton"],type:"circle",label:t?"Remove":"Save",onClick:e=>{e.stopPropagation(),this.buttonClicked()}},t?T.default.createElement(Me,null):T.default.createElement(Ke,null))))))}},We=class extends o.default.Component{constructor(e){super(e),this.endOfList=!1,this.lastScroll=0,this.requestQueue=[],this.requestPage=0,this.cardList=[],Object.assign(this,e),this.updateAppConfig=e.updateAppConfig.bind(this),this.sortConfig={by:f(ae,"top")},this.state={searchValue:"",cards:[],tabs:e.CONFIG.tabs,rest:!0,endOfList:!1,schemes:e.CONFIG.theme.schemes,activeScheme:e.CONFIG.theme.activeScheme,activeThemeKey:e.CONFIG.theme.activeThemeKey}}getInstalledTheme(){var e=localStorage.getItem(c);if(!e)return null;e=localStorage.getItem(e);return e?JSON.parse(e):null}newRequest(e,t){this.cardList=[];var a=[];this.requestQueue.unshift(a),this.loadAmount(a,e,t)}appendCard(e,t){e=o.default.createElement($e,{item:e,key:this.props.CONFIG.activeTab+":"+e.title,CONFIG:this.CONFIG,visual:this.props.CONFIG.visual,type:t,activeThemeKey:this.state.activeThemeKey,updateColourSchemes:this.updateColourSchemes.bind(this),updateActiveTheme:this.setActiveTheme.bind(this)});this.cardList.push(e),this.setState({cards:this.cardList})}updateSort(e){e&&(this.sortConfig.by=e,localStorage.setItem(ae,e)),this.requestPage=0,this.cardList=[],this.setState({cards:[],rest:!1,endOfList:!1}),this.endOfList=!1,this.newRequest(S)}updateTabs(){this.setState({tabs:[...this.props.CONFIG.tabs]})}updatePostsVisual(){this.cardList=this.cardList.map(e=>o.default.createElement($e,h(m({},e.props),{CONFIG:this.CONFIG}))),this.setState({cards:[...this.cardList]})}switchTo(e){this.CONFIG.activeTab=e,localStorage.setItem(te,e),this.cardList=[],this.requestPage=0,this.setState({cards:[],rest:!1,endOfList:!1}),this.endOfList=!1,this.newRequest(S)}async loadPage(t,e){switch(this.CONFIG.activeTab){case"Extensions":var a=await async function(e=1,t=[],a){let n=a?`https://api.github.com/search/repositories?q=${encodeURIComponent(a+"+topic:spicetify-extensions")}&per_page=100`:`https://api.github.com/search/repositories?q=${encodeURIComponent("topic:spicetify-extensions")}&per_page=100`;e&&(n+="&page="+e);const r=await fetch(n).then(e=>e.json()).catch(()=>[]);return r.items||Spicetify.showNotification("Too Many Requests, Cool Down."),h(m({},r),{page_count:r.items.length,items:r.items.filter(e=>!t.includes(e.html_url))})}(this.requestPage,this.BLACKLIST,e);for(const i of a.items){const o=await async function(t,n,r,s=!1){try{let e;var a=t.match(new RegExp("https:\\/\\/api\\.github\\.com\\/repos\\/(?<user>.+)\\/(?<repo>.+)\\/contents"));if(!a||!a.groups)return null;const{user:i,repo:o}=a.groups;return e=await we(i,o,n),(e=Array.isArray(e)?e:[e]).reduce((e,t)=>{var a=t.branch||n,a={manifest:t,title:t.name,subtitle:t.description,authors:X(t.authors,i),user:i,repo:o,branch:a,imageURL:t.preview&&t.preview.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.preview,extensionURL:t.main.startsWith("http")?t.main:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.main,readmeURL:t.readme&&t.readme.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${i}/${o}/${a}/`+t.readme,stars:r,tags:t.tags};return t&&t.name&&t.description&&t.main&&(s&&localStorage.getItem(`marketplace:installed:${i}/${o}/`+t.main)||e.push(a)),e},[])}catch(e){return null}}(i.contents_url,i.default_branch,i.stargazers_count,this.CONFIG.visual.hideInstalled);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;o&&o.length&&o.forEach(e=>this.appendCard(e,"extension"))}var n=-1<this.requestPage&&this.requestPage?this.requestPage:1,r=S*(n-1)+a.page_count,s=a.total_count-r;if(console.log(`Parsed ${r}/${a.total_count} extensions`),0<s)return n+1;console.log("No more extension results");break;case"Installed":{const l={theme:f(b,[]),extension:f(g,[]),snippet:f(y,[])};for(const c in l)l[c].length&&l[c].forEach(async e=>{e=f(e);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;this.appendCard(e,c)});break}case"Themes":r=await async function(e=1,t=[],a){let n=a?`https://api.github.com/search/repositories?q=${encodeURIComponent(a+"+topic:spicetify-extensions")}&per_page=100`:`https://api.github.com/search/repositories?q=${encodeURIComponent("topic:spicetify-themes")}&per_page=100`;e&&(n+="&page="+e);const r=await fetch(n).then(e=>e.json()).catch(()=>[]);return r.items||Spicetify.showNotification("Too Many Requests, Cool Down."),h(m({},r),{page_count:r.items.length,items:r.items.filter(e=>!t.includes(e.html_url))})}(this.requestPage,this.BLACKLIST,e);for(const u of r.items){const p=await async function(t,n,r){try{let e;var a=t.match(new RegExp("https:\\/\\/api\\.github\\.com\\/repos\\/(?<user>.+)\\/(?<repo>.+)\\/contents"));if(!a||!a.groups)return null;const{user:s,repo:i}=a.groups;return e=await we(s,i,n),(e=Array.isArray(e)?e:[e]).reduce((e,t)=>{var a=t.branch||n,a={manifest:t,title:t.name,subtitle:t.description,authors:X(t.authors,s),user:s,repo:i,branch:a,imageURL:t.preview&&t.preview.startsWith("http")?t.preview:`https://raw.githubusercontent.com/${s}/${i}/${a}/`+t.preview,readmeURL:t.readme&&t.readme.startsWith("http")?t.readme:`https://raw.githubusercontent.com/${s}/${i}/${a}/`+t.readme,stars:r,tags:t.tags,cssURL:t.usercss.startsWith("http")?t.usercss:`https://raw.githubusercontent.com/${s}/${i}/${a}/`+t.usercss,schemesURL:t.schemes?t.schemes.startsWith("http")?t.schemes:`https://raw.githubusercontent.com/${s}/${i}/${a}/`+t.schemes:null,include:t.include};return null!=t&&t.name&&null!=t&&t.usercss&&null!=t&&t.description&&e.push(a),e},[])}catch(e){return null}}(u.contents_url,u.default_branch,u.stargazers_count);if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;p&&p.length&&p.forEach(e=>this.appendCard(e,"theme"))}a=-1<this.requestPage&&this.requestPage?this.requestPage:1,s=S*(a-1)+r.page_count,n=r.total_count-s;if(console.log(`Parsed ${s}/${r.total_count} themes`),0<n)return a+1;console.log("No more theme results");break;case"Snippets":{const d=await(async()=>{const e=ke;if(e)return e.reduce((e,t)=>{const a=m({},t);return a.preview&&(a.imageURL=a.preview&&a.preview.startsWith("http")?a.preview:"https://raw.githubusercontent.com/spicetify/spicetify-marketplace/feat/snippet-previews/"+a.preview,delete a.preview),e.push(a),e},[])})();if(1<this.requestQueue.length&&t!==this.requestQueue[0])return-1;d&&d.length&&d.forEach(e=>this.appendCard(e,"snippet"))}}return this.setState({rest:!0,endOfList:!0}),this.endOfList=!0,0}async loadAmount(t,e=S,a){for(this.setState({rest:!1}),e+=this.cardList.length,this.requestPage=await this.loadPage(t,a);this.requestPage&&-1!==this.requestPage&&this.cardList.length<e&&!this.state.endOfList;)this.requestPage=await this.loadPage(t,a);-1===this.requestPage?this.requestQueue=this.requestQueue.filter(e=>e!==t):(this.requestQueue.shift(),this.setState({rest:!0}))}loadMore(){this.state.rest&&!this.endOfList&&this.loadAmount(this.requestQueue[0],S)}updateColourSchemes(e,t){console.log("updateColourSchemes",e,t),this.CONFIG.theme.schemes=e,this.CONFIG.theme.activeScheme=t,e&&t&&e[t]?ee(null==(a=this.CONFIG.theme.schemes)?void 0:a[t]):ee(null);var a=f(c);const n=f(a);n?(n.activeScheme=t,console.log(n),localStorage.setItem(a,JSON.stringify(n))):console.log("No installed theme data"),this.setState({schemes:e,activeScheme:t})}async componentDidMount(){this.gridUpdateTabs=this.updateTabs.bind(this),this.gridUpdatePostsVisual=this.updatePostsVisual.bind(this);const e=document.querySelector(".os-viewport");this.checkScroll=this.isScrolledBottom.bind(this),e&&(e.addEventListener("scroll",this.checkScroll),this.cardList.length)?0<this.lastScroll&&e.scrollTo(0,this.lastScroll):(this.BLACKLIST=await(await fetch("https://raw.githubusercontent.com/spicetify/spicetify-marketplace/main/resources/blacklist.json").then(e=>e.json()).catch(()=>({}))).repos,this.newRequest(S))}componentWillUnmount(){this.gridUpdateTabs=this.gridUpdatePostsVisual=null;const e=document.querySelector(".os-viewport");e&&(this.lastScroll=e.scrollTop,e.removeEventListener("scroll",this.checkScroll))}isScrolledBottom(e){e=e.target;e.scrollTop+e.clientHeight>=e.scrollHeight&&this.loadMore()}setActiveTheme(e){this.CONFIG.theme.activeThemeKey=e,this.setState({activeThemeKey:e})}getActiveScheme(){return this.state.activeScheme}render(){return o.default.createElement("section",{className:"contentSpacing"},o.default.createElement("div",{className:"marketplace-header"},o.default.createElement("h1",null,this.props.title),o.default.createElement("div",{className:"marketplace-header__right"},this.state.activeScheme?o.default.createElement(xe,{onChange:e=>this.updateColourSchemes(this.state.schemes,e),sortBoxOptions:(e=this.state.schemes)?Object.keys(e).map(e=>({key:e,value:e})):[],sortBySelectedFn:e=>e.key===this.getActiveScheme()}):null,o.default.createElement("button",{type:"button",title:"Settings",className:"marketplace-settings-button",id:"marketplace-settings-button",onClick:()=>x("SETTINGS",this.CONFIG,this.updateAppConfig)},o.default.createElement(Oe,null)))),o.default.createElement("div",{className:"searchbar--bar__wrapper"},o.default.createElement("input",{className:"searchbar-bar",type:"text",placeholder:`Search ${this.CONFIG.activeTab}...`,value:this.state.searchValue,onChange:e=>{this.setState({searchValue:e.target.value})},onKeyDown:e=>{"Enter"===e.key?(this.setState({endOfList:!1}),this.newRequest(S,this.state.searchValue.trim().toLowerCase()),this.searchRequested=!0):"Backspace"!==e.key&&"Delete"!==e.key||!this.searchRequested||""!==this.state.searchValue.trim()||(this.setState({endOfList:!1}),this.newRequest(S,this.state.searchValue.trim().toLowerCase()),this.searchRequested=!1)}})),[{handle:"extension",name:"Extensions"},{handle:"theme",name:"Themes"},{handle:"snippet",name:"Snippets"}].map(t=>{var e=this.cardList.filter(e=>e.props.type===t.handle).filter(e=>{const t=this.state["searchValue"],{title:a,user:n}=e.props.item;if(""===t.trim()||a.toLowerCase().includes(t.trim().toLowerCase())||null!=n&&n.toLowerCase().includes(t.trim().toLowerCase()))return e}).map(e=>{return o.default.cloneElement(e,{activeThemeKey:this.state.activeThemeKey})});return e.length?o.default.createElement(o.default.Fragment,null,o.default.createElement("h2",{className:"marketplace-card-type-heading"},t.name),o.default.createElement("div",{className:"marketplace-grid main-gridContainer-gridContainer main-gridContainer-fixedWidth","data-tab":this.CONFIG.activeTab,"data-card-type":t.name},e)):null}),"Snippets"===this.CONFIG.activeTab?o.default.createElement(k,{classes:["marketplace-add-snippet-btn"],onClick:()=>x("ADD_SNIPPET")},"+Add CSS"):null,o.default.createElement("footer",{className:"marketplace-footer"},!this.state.endOfList&&(this.state.rest?o.default.createElement(Ee,{onClick:this.loadMore.bind(this)}):o.default.createElement(Ce,null))),o.default.createElement(Re,{switchCallback:this.switchTo.bind(this),links:this.CONFIG.tabs,activeLink:this.CONFIG.activeTab}));var e}},F=a(v("react")),Ge=class extends F.default.Component{constructor(){super(...arguments),this.state={html:"<p>Loading...</p>"}}async getReadmeHTML(){try{const a=await fetch(this.props.data.readmeURL);if(!a.ok)throw Spicetify.showNotification(`Error loading README (HTTP ${a.status})`);var e={text:await a.text(),context:this.props.data.user+"/"+this.props.data.repo,mode:"gfm"};const n=await fetch("https://api.github.com/markdown",{method:"POST",body:JSON.stringify(e)});if(!n.ok)throw Spicetify.showNotification(`Error parsing README (HTTP ${n.status})`);var t=await n.text();return null==t&&Spicetify.Platform.History.goBack(),t}catch(e){return Spicetify.Platform.History.goBack(),null}}componentDidMount(){this.getReadmeHTML().then(e=>{null!=e&&this.setState({html:e})})}componentDidUpdate(){document.querySelectorAll("#marketplace-readme img").forEach(e=>{e.addEventListener("error",e=>{const t=e.target;e=t.getAttribute("src"),e=`https://raw.githubusercontent.com/${this.props.data.user}/${this.props.data.repo}/${this.props.data.branch}/`+e;t.setAttribute("src",e)},{once:!0})})}render(){return F.default.createElement("section",{className:"contentSpacing"},F.default.createElement("div",{className:"marketplace-header"},F.default.createElement("h1",null,this.props.title)),F.default.createElement("div",{id:"marketplace-readme",className:"marketplace-readme__container",dangerouslySetInnerHTML:{__html:this.state.html}}))}},ze=class extends i.default.Component{constructor(e){super(e),this.state={count:0,CONFIG:{}},this.updateConfig=e=>{this.CONFIG=m({},e),console.log("updated config",this.CONFIG),this.setState({CONFIG:m({},e)})};e=f(l,null);let t=[];try{if(t=JSON.parse(e),!Array.isArray(t))throw new Error("Could not parse marketplace tabs key");if(0===t.length)throw new Error("Empty marketplace tabs key");if(0<t.filter(e=>!e).length)throw new Error("Falsey marketplace tabs key")}catch(e){t=ne,localStorage.setItem(l,JSON.stringify(t))}let a={},n=null;try{var r=f(c,null);if(r){var s=f(r,null);if(!s)throw new Error("No installed theme data");a=s.schemes,n=s.activeScheme}else console.log("No theme set as installed")}catch(e){console.error(e)}this.CONFIG={visual:{stars:JSON.parse(f("marketplace:stars",!0)),tags:JSON.parse(f("marketplace:tags",!0)),hideInstalled:JSON.parse(f("marketplace:hideInstalled",!1)),colorShift:JSON.parse(f("marketplace:colorShift",!1)),type:JSON.parse(f("marketplace:type",!1)),followers:JSON.parse(f("marketplace:followers",!1))},tabs:t,activeTab:f(te,t[0]),theme:{activeThemeKey:f(c,null),schemes:a,activeScheme:n}},this.CONFIG.activeTab&&this.CONFIG.tabs.filter(e=>e.name===this.CONFIG.activeTab).length||(this.CONFIG.activeTab=this.CONFIG.tabs[0].name)}render(){var e=Spicetify.Platform.History["location"];return e.pathname===re+"/readme"?i.default.createElement(Ge,{title:"Spicetify Marketplace - Readme",data:e.state.data}):i.default.createElement(We,{title:"Spicetify Marketplace",CONFIG:this.CONFIG,updateAppConfig:this.updateConfig})}},He=a(v("react"));return n=V,z(s({},"__esModule",{value:!0}),n)})();const render=()=>marketplace.default();