!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).db=e()}}((function(){return function e(n,t,r){function o(u,c){if(!t[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var s=t[u]={exports:{}};n[u][0].call(s.exports,(function(e){var t=n[u][1][e];return o(t||e)}),s,s.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,n,t){"use strict";var r=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(t.push(u.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw i}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function i(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}!function(e){var t=e.IDBKeyRange||e.webkitIDBKeyRange,u="readonly",c="readwrite",a=Object.prototype.hasOwnProperty,f=function(e){return e},s=e.indexedDB||e.webkitIndexedDB||e.mozIndexedDB||e.oIndexedDB||e.msIndexedDB||e.shimIndexedDB||function(){throw new Error("IndexedDB required")}(),l={},d=["abort","error","versionchange"];function v(e){return e&&"object"===(void 0===e?"undefined":o(e))}function y(e){var n=Object.keys(e).sort();if(1===n.length){var t=n[0],r=e[t],o=void 0,i=void 0;switch(t){case"eq":o="only";break;case"gt":o="lowerBound",i=!0;break;case"lt":o="upperBound",i=!0;break;case"gte":o="lowerBound";break;case"lte":o="upperBound";break;default:throw new TypeError("`"+t+"` is not a valid key")}return[o,[r,i]]}var u=e[n[0]],c=e[n[1]],a=n.join("-");switch(a){case"gt-lt":case"gt-lte":case"gte-lt":case"gte-lte":return["bound",[u,c,"gt"===n[0],"lt"===n[1]]];default:throw new TypeError("`"+a+"` are conflicted keys")}}function h(e){if(e&&"object"===(void 0===e?"undefined":o(e))&&!(e instanceof t)){var n=y(e),u=r(n,2),c=u[0],a=u[1];return t[c].apply(t,i(a))}return e}var p=function(e,n,r,a){var s=this,l=null,d=function(a,f,s,d,v,y,h){return new Promise((function(p,m){var b=void 0;try{b=a?t[a].apply(t,i(f)):null}catch(e){return void m(e)}y=y||[],v=v||null;var w=[],g=0,x=[b],j=n.transaction(e,l?c:u);j.onerror=function(e){return m(e)},j.onabort=function(e){return m(e)},j.oncomplete=function(){return p(w)};var E=j.objectStore(e),k="string"==typeof r?E.index(r):E;"count"!==s&&x.push(d||"next");var D=l?Object.keys(l):[];k[s].apply(k,x).onsuccess=function(e){var n=e.target.result;if("number"==typeof n)w=n;else if(n)if(null!==v&&v[0]>g)g=v[0],n.advance(v[0]);else if(null!==v&&g>=v[0]+v[1]);else{var t=function(){var e,t=!0,r="value"in n?n.value:n.key;try{y.forEach((function(e){t="function"==typeof e[0]?t&&e[0](r):t&&r[e[0]]===e[1]}))}catch(e){return m(e),{v:void 0}}if(t){if(g++,l)try{e=r,D.forEach((function(n){var t=l[n];"function"==typeof t&&(t=t(e)),e[n]=t})),r=e,n.update(r)}catch(e){return m(e),{v:void 0}}try{w.push(h(r))}catch(e){return m(e),{v:void 0}}}n.continue()}();if("object"===(void 0===t?"undefined":o(t)))return t.v}}}))},v=function(e,n,t){var r=[],i="next",u="openCursor",c=null,s=f,v=!1,y=a||t,h=function(){return y?Promise.reject(y):d(e,n,u,v?i+"unique":i,c,r,s)},p=function(){return i=null,u="count",{execute:h}},m=function(){return u="openKeyCursor",{desc:g,distinct:x,execute:h,filter:w,limit:b,map:E}},b=function(e,n){return y=(c=n?[e,n]:[0,e]).some((function(e){return"number"!=typeof e}))?new Error("limit() arguments must be numeric"):y,{desc:g,distinct:x,filter:w,keys:m,execute:h,map:E,modify:j}},w=function e(n,t){return r.push([n,t]),{desc:g,distinct:x,execute:h,filter:e,keys:m,limit:b,map:E,modify:j}},g=function(){return i="prev",{distinct:x,execute:h,filter:w,keys:m,limit:b,map:E,modify:j}},x=function(){return v=!0,{count:p,desc:g,execute:h,filter:w,keys:m,limit:b,map:E,modify:j}},j=function(e){return l=e&&"object"===(void 0===e?"undefined":o(e))?e:null,{execute:h}},E=function(e){return s=e,{count:p,desc:g,distinct:x,execute:h,filter:w,keys:m,limit:b,modify:j}};return{count:p,desc:g,distinct:x,execute:h,filter:w,keys:m,limit:b,map:E,modify:j}};["only","bound","upperBound","lowerBound"].forEach((function(e){s[e]=function(){return v(e,arguments)}})),this.range=function(e){var n=void 0,t=[null,null];try{t=y(e)}catch(e){n=e}return v.apply(void 0,i(t).concat([n]))},this.filter=function(){var e=v(null,null);return e.filter.apply(e,arguments)},this.all=function(){return this.filter()}},m=function(e,n,t,r){var o=this,i=!1;if(this.getIndexedDB=function(){return e},this.isClosed=function(){return i},this.query=function(n,t){var r=i?new Error("Database has been closed"):null;return new p(n,e,t,r)},this.add=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new Promise((function(t,o){if(i)o(new Error("Database has been closed"));else{var u=r.reduce((function(e,n){return e.concat(n)}),[]),f=e.transaction(n,c);f.onerror=function(e){e.preventDefault(),o(e)},f.onabort=function(e){return o(e)},f.oncomplete=function(){return t(u)};var s=f.objectStore(n);u.some((function(e){var n=void 0,t=void 0;if(v(e)&&a.call(e,"item")&&(t=e.key,e=e.item,null!=t))try{t=h(t)}catch(e){return o(e),!0}try{n=null!=t?s.add(e,t):s.add(e)}catch(e){return o(e),!0}n.onsuccess=function(n){if(v(e)){var t=n.target,r=t.source.keyPath;null===r&&(r="__id__"),a.call(e,r)||Object.defineProperty(e,r,{value:t.result,enumerable:!0})}}}))}}))},this.update=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return new Promise((function(t,o){if(i)o(new Error("Database has been closed"));else{var u=r.reduce((function(e,n){return e.concat(n)}),[]),f=e.transaction(n,c);f.onerror=function(e){e.preventDefault(),o(e)},f.onabort=function(e){return o(e)},f.oncomplete=function(){return t(u)};var s=f.objectStore(n);u.some((function(e){var n=void 0,t=void 0;if(v(e)&&a.call(e,"item")&&(t=e.key,e=e.item,null!=t))try{t=h(t)}catch(e){return o(e),!0}try{n=null!=t?s.put(e,t):s.put(e)}catch(e){return o(e),!0}n.onsuccess=function(n){if(v(e)){var t=n.target,r=t.source.keyPath;null===r&&(r="__id__"),a.call(e,r)||Object.defineProperty(e,r,{value:t.result,enumerable:!0})}}}))}}))},this.put=function(){return this.update.apply(this,arguments)},this.remove=function(n,t){return new Promise((function(r,o){if(i)o(new Error("Database has been closed"));else{try{t=h(t)}catch(e){return void o(e)}var u=e.transaction(n,c);u.onerror=function(e){e.preventDefault(),o(e)},u.onabort=function(e){return o(e)},u.oncomplete=function(){return r(t)};var a=u.objectStore(n);try{a.delete(t)}catch(e){o(e)}}}))},this.delete=function(){return this.remove.apply(this,arguments)},this.clear=function(n){return new Promise((function(t,r){if(i)r(new Error("Database has been closed"));else{var o=e.transaction(n,c);o.onerror=function(e){return r(e)},o.onabort=function(e){return r(e)},o.oncomplete=function(){return t()},o.objectStore(n).clear()}}))},this.close=function(){return new Promise((function(r,o){i?o(new Error("Database has been closed")):(e.close(),i=!0,delete l[n][t],r())}))},this.get=function(n,t){return new Promise((function(r,o){if(i)o(new Error("Database has been closed"));else{try{t=h(t)}catch(e){return void o(e)}var u=e.transaction(n);u.onerror=function(e){e.preventDefault(),o(e)},u.onabort=function(e){return o(e)};var c=u.objectStore(n),a=void 0;try{a=c.get(t)}catch(e){o(e)}a.onsuccess=function(e){return r(e.target.result)}}}))},this.count=function(n,t){return new Promise((function(r,o){if(i)o(new Error("Database has been closed"));else{try{t=h(t)}catch(e){return void o(e)}var u=e.transaction(n);u.onerror=function(e){e.preventDefault(),o(e)},u.onabort=function(e){return o(e)};var c=u.objectStore(n),a=void 0;try{a=null==t?c.count():c.count(t)}catch(e){o(e)}a.onsuccess=function(e){return r(e.target.result)}}}))},this.addEventListener=function(n,t){if(!d.includes(n))throw new Error("Unrecognized event type "+n);"error"!==n?e.addEventListener(n,t):e.addEventListener(n,(function(e){e.preventDefault(),t(e)}))},this.removeEventListener=function(n,t){if(!d.includes(n))throw new Error("Unrecognized event type "+n);e.removeEventListener(n,t)},d.forEach((function(e){this[e]=function(n){return this.addEventListener(e,n),this}}),this),!r){var u=void 0;return[].some.call(e.objectStoreNames,(function(e){if(o[e])return u=new Error('The store name, "'+e+'", which you have attempted to load, conflicts with db.js method names."'),o.close(),!0;o[e]={},Object.keys(o).filter((function(e){return![].concat(d,["close","addEventListener","removeEventListener"]).includes(e)})).map((function(n){return o[e][n]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return o[n].apply(o,[e].concat(r))}}))})),u}},b=function(e,n,t,r){var o=e.target.result;l[n][t]=o;var i=new m(o,n,t,r);return i instanceof Error?Promise.reject(i):Promise.resolve(i)},w={version:"0.15.0",open:function(e){var n=e.server,t=e.version||1,r=e.schema,i=e.noServerMethods;return l[n]||(l[n]={}),new Promise((function(e,u){if(l[n][t])b({target:{result:l[n][t]}},n,t,i).then(e,u);else{var c=function(){if("function"==typeof r)try{r=r()}catch(e){return u(e),{v:void 0}}var c=s.open(n,t);c.onsuccess=function(r){return b(r,n,t,i).then(e,u)},c.onerror=function(e){e.preventDefault(),u(e)},c.onupgradeneeded=function(e){var n=function(e,n,t,r,i,u){if(t&&0!==t.length){for(var c=0;c<r.objectStoreNames.length;c++){var f=r.objectStoreNames[c];a.call(t,f)||r.deleteObjectStore(f)}var s=void 0;return Object.keys(t).some((function(e){var i=t[e],u=void 0;if(r.objectStoreNames.contains(e))u=n.transaction.objectStore(e);else try{u=r.createObjectStore(e,i.key)}catch(e){return s=e,!0}Object.keys(i.indexes||{}).some((function(e){try{u.index(e)}catch(t){var n=i.indexes[e];n=n&&"object"===(void 0===n?"undefined":o(n))?n:{};try{u.createIndex(e,n.keyPath||n.key||e,n)}catch(e){return s=e,!0}}}))})),s}}(0,c,r,e.target.result);n&&u(n)},c.onblocked=function(e){var r=new Promise((function(e,r){c.onsuccess=function(o){b(o,n,t,i).then(e,r)},c.onerror=function(e){return r(e)}}));e.resume=r,u(e)}}();if("object"===(void 0===c?"undefined":o(c)))return c.v}}))},delete:function(e){return new Promise((function(n,t){var r=s.deleteDatabase(e);r.onsuccess=function(e){return n(e)},r.onerror=function(e){return t(e)},r.onblocked=function(e){e=null===e.newVersion||"undefined"==typeof Proxy?e:new Proxy(e,{get:function(e,n){return"newVersion"===n?null:e[n]}});var n=new Promise((function(n,t){r.onsuccess=function(t){"newVersion"in t||(t.newVersion=e.newVersion),"oldVersion"in t||(t.oldVersion=e.oldVersion),n(t)},r.onerror=function(e){return t(e)}}));e.resume=n,t(e)}}))},cmp:function(e,n){return new Promise((function(t,r){try{t(s.cmp(e,n))}catch(e){r(e)}}))}};void 0!==n&&void 0!==n.exports?n.exports=w:e.db=w}(self)},{}]},{},[1])(1)}));