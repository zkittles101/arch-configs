"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[259],{31263:(e,t,o)=>{o.r(t),o.d(t,{AppsSetup:()=>V});var i=o(77094),r=o.n(i),n=(o(33948),o(96486)),a=o.n(n),s=o(67294),l=o.n(s),d=o(13991),c=o(480),p=o(28350),u=o(24405),g=o(66673),h=o(21202),m=o(82990),v=o(5366),f=o(90922),w=o(63779),y=o(29974),S=o(150),b=o(93561),x=o(28020),k=o(93959),C=o(54258),B=o(23537),I=o(27832),P=o(9714),W=o(36324),D=o(82136),Z=o(29716),_=o(72693),R=o(60588),H=o(3779),M=o(14947);function A(e){const{appTemplate:t,isSelected:o}=e,[i,n]=(0,s.useState)(!1),a=(0,p.VK)((()=>(0,k.SP)(t.uri)),[t.uri]),l=(0,u.y)((e=>({container:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},appButton:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:62,height:62,backgroundColor:e.whiteButtonBackground,boxShadow:e.lightBoxShadow,borderRadius:12,background:"dark"===e.mode?e.accentColors.gray[200]:e.whiteButtonBackground},selectedWrapper:{boxShadow:e.outlineBlueInputBoxShadow,background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground},logo:{width:32,height:32},logoSelected:{filter:"invert(40%) sepia(61%) saturate(4508%) hue-rotate(171deg) brightness(108%) contrast(84%) grayscale(20%)"},badge:{width:26,height:26,display:"inline-flex",alignItems:"center",justifyContent:"center",backgroundColor:e.invoiceGreen,borderRadius:50,position:"absolute",top:-9,right:-9,border:"2px solid ".concat(e.sidebarBackground),webkitBackdropFilter:"blur(12px)",opacity:1,transform:"scale(1)",transition:"opacity 0.2s ease, transform 0.2s ease, background-color 0.1s linear"},selectBadge:{backgroundColor:e.invoiceGreen},selectedBadge:{backgroundColor:e.blueButtonBackground},deselectBadge:{backgroundColor:e.redBadgeBackground},appName:{marginTop:8,fontSize:14,fontWeight:500,textAlign:"center"},buttonBadgeIcon:{width:16,height:16,fill:"white"}})),[]),d=(0,s.useCallback)((()=>{o?e.onDeSelect(t.uri):e.onSelect(t.uri),n(!1)}),[t.uri,o,e]);return r()("div",{style:l.container,onMouseEnter:()=>{n(!0),e.onHover()},onMouseLeave:()=>{n(!1),e.onUnhover()}},void 0,r()(M.Z,{style:{...l.appButton,...o?l.selectedWrapper:{}},onClick:d,ignoreLocalHoverState:!0},void 0,r()("img",{style:{...l.logo,...o?l.logoSelected:{}},src:a?a.logo:t.icon})),r()(M.Z,{style:{...l.badge,...o?i?l.deselectBadge:l.selectedBadge:i?l.selectBadge:{opacity:0,transform:"scale(0.4)"}},onClick:d,ignoreLocalHoverState:!0},void 0,o?i?H.Z.closeSmall({width:16,height:16,fill:"white"}):H.Z.thinCheck({width:15,height:15,fill:"white"}):H.Z.plusThick({width:16,height:16,fill:"white"})),r()("div",{style:l.appName},void 0,a?a.name:t.shortName))}const F=a().compact(["notion://docs/simple_docs_preset","notion://projects/projects_preset","notion://meetings/meeting_notes_preset","notion://wiki/company_home_preset"].map((e=>{var t;return null===(t=(0,k.SP)(e))||void 0===t?void 0:t.presets.find((t=>t.uri===e))})));function T(e){const t=(0,c.O7)(),o=(0,p.VK)((()=>{const e=(0,x.ui)(t);return{left:e,right:e,bottom:R.Z.paddingBottom(t),coverHeight:R.Z.defaultPageCoverHeight(t)}}),[t]),i=l().useMemo((()=>{const e={};return F.forEach((o=>{var i;const r=o.uri.startsWith("notion://wiki")?(0,C.L)(o):null===(i=o.previews)||void 0===i?void 0:i.find((e=>"previewRootId"in e));r&&(e[o.uri]=new P.Z(t,{id:r.previewRootId,table:h.iU,spaceId:r.spaceId}))})),e}),[t]),n=e.presetUri.startsWith("notion://wiki"),a=i[e.presetUri];return a?r()("div",{style:{minWidth:900,height:"100%",position:"relative",paddingTop:n?0:"10%"}},void 0,r()(R.Z,{store:a,loadingContainerStore:void 0,context:D.S.InAppTemplatePreview,titleFontSize:n?void 0:28,paddingBottom:o.bottom,paddingLeft:o.left,paddingRight:o.right,pageCoverHeight:o.coverHeight,disabled:!0},a.id),r()("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999,cursor:"pointer"}})):null}function U(e){const t=(0,s.useCallback)(((e,t)=>(e%t+t)%t),[]),o=(0,g.Kt)(e.forceIndex,200,((e,t)=>e===t)),[i,n]=(0,s.useState)(0);(0,s.useEffect)((()=>{if(void 0===o)return;const r=t(-i,e.items.length),a=t(o-r,e.items.length);n((e=>e-a))}),[i,n,o,t,e.items.length]),(0,s.useEffect)((()=>{var t;const i=setInterval((()=>{void 0===o&&n((e=>e-1))}),null!==(t=e.rotationDelayMs)&&void 0!==t?t:2500);return()=>{clearInterval(i)}}),[n,o,e.rotationDelayMs]);const l=(0,u.y)((e=>({item:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"white",borderRadius:8,border:"1px solid rgba(0, 0, 0, 0.05)",boxShadow:"0px 16px 24px rgba(0, 0, 0, 0.06), 0px 2px 6px rgba(0, 0, 0, 0.04), 0px 0px 1px rgba(0, 0, 0, 0.04)",overflow:"hidden",transition:"transform 0.5s ease-in-out, opacity 0.5s ease-out"}})),[]),d=e.items.length,c=t(-i,d),p=e.items[t(c-1,d)].node,h=e.items[c].node,m=[...a().times(d,(e=>({key:"before".concat(e),node:null}))),...e.items,...a().times(d,(e=>({key:"after".concat(e),node:null})))],v=m.map(((o,n)=>{var a;let{key:s}=o;const c=t(n+i,m.length),u=c>=d&&c<2*d,g=(c-d)*(null!==(a=e.offset)&&void 0!==a?a:12),v=c<d?1.05:1,f="translateX(".concat(g,"px) translateY(").concat(g,"px) scale(").concat(v,")"),w=u?1:0;return r()("div",{style:{...l.item,zIndex:m.length-c,transform:f,opacity:w}},s,c===d?h:c===d-1?p:void 0)}));return r()("div",{style:{position:"relative",...e.style}},void 0,v)}function V(e){const[t]=(0,p.oR)(W.default),[{currentUserRootStore:o,currentSpaceViewStore:i,currentSpaceStore:n,currentUserSettingsStore:g}]=(0,p.oR)(I.default),h=(0,c.O7)(),[x,C]=(0,s.useState)(!1),[P,D]=(0,s.useState)(void 0),R=(0,u.y)((e=>({container:{backgroundColor:e.sidebarBackground,width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",borderLeft:"1px solid ".concat(e.lightDividerColor)},left:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:"10%",marginRight:"10%",padding:"42px 16px",overflowX:"visible",overflowY:"auto"},right:{flex:1,height:"70%",overflow:"visible"},header:{position:"relative",textAlign:"left",paddingBottom:42},title:{fontWeight:m.Z.fontWeight.semibold,fontSize:28,lineHeight:1.2,color:e.regularTextColor,fontFamily:m.Z.getHeaderFontFamily({locale:d.SP}),marginBottom:16,width:"90%"},subtitle:{fontSize:18,lineHeight:1.45,paddingTop:2,color:e.mediumTextColor,fontWeight:m.Z.fontWeight.regular},apps:{marginBottom:48,display:"inline-flex",flexWrap:"wrap",justifyContent:"space-between"},previewImage:{width:"100%",height:"100%"}})),[]);if(!i||!o||!g)return null;if(!t.isOnboarding||"workspace_setup"!==t.stage)return null;const H=e=>{const o=a().uniq([...t.selectedPresets,e]),i=a().sortBy(o,(e=>F.findIndex((t=>t.uri===e))));W.default.setState({...t,selectedPresets:i})},M=e=>{const o=t.selectedPresets.filter((t=>t!==e));W.default.setState({...t,selectedPresets:o})},V=t.selectedPresets.length>0?t.selectedPresets:F.map((e=>e.uri)),L=V.findIndex((e=>(null==P?void 0:P.uri)===e)),j=r()(U,{style:{width:"100%",height:"100%"},items:V.map((e=>({key:e,node:r()(T,{presetUri:e})}))),forceIndex:L>-1?L:void 0});return l().createElement(l().Fragment,null,r()("div",{style:R.container},void 0,r()("div",{style:R.left},void 0,r()("div",{style:{display:"flex",alignItems:"stretch",flexDirection:"column"}},void 0,r()("div",{style:R.header},void 0,r()("div",{style:R.title},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.header.title",defaultMessage:"Get started with Notion"})),r()("div",{style:R.subtitle},void 0,r()("div",{},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.header.description",defaultMessage:"Add templates to your workspace by choosing from the options below. Weâ€™ll walk you through how to easily customize them in a few simple steps."})))),r()("div",{style:R.apps},void 0,F.map((e=>r()(A,{appTemplate:e,isSelected:t.selectedPresets.includes(e.uri),onSelect:H,onDeSelect:M,onHover:()=>D(e),onUnhover:()=>D(void 0)})))),t.selectedPresets.length>0?r()(_.Z,{isLarge:!0,style:{height:40},onClick:async()=>{if(!n)return;C(!0);const{performResult:{collectionViewBlockStores:e}}=(0,b.createAndCommit)({environment:h,userAction:"AppsSetup.onContinueWithApps",perform:e=>{const o=a().compact(t.selectedPresets.map((t=>{var o;const i=null===(o=(0,k.SP)(t))||void 0===o?void 0:o.uri;if(!i)return;return(0,f.b1)({environment:h,appUri:i,parentStore:n,spaceId:n.id,transaction:e,presetUri:t})})));for(const t of o){var r;const o=null===(r=i.getTeamsStores()[0])||void 0===r?void 0:r.id;if((0,B.bq)()&&o){const i=Z.Z.createChildStore(n,{table:"team",id:o,spaceId:n.id});(0,S.c0)({teamStore:i,store:t,transaction:e}),(0,S.SQ)({teamStore:i,store:t,transaction:e})}else{var s;(0,y.Hj)({environment:h,spaceStore:n,spaceViewStore:i,pageStore:t,isPrivate:"personal"===(null===(s=n.getValue())||void 0===s?void 0:s.plan_type),transaction:e})}}return{collectionViewBlockStores:o}}});await(0,w.lp)(h,t),e.length>0?await(0,y.y3)({environment:h,spaceViewStore:i,redirectPageId:e[0].id,userSettingsStore:g,userRootStore:o}):"getting_started_page"===t.redirectData.type&&t.redirectData.pageId&&await(0,y.y3)({environment:h,spaceViewStore:i,redirectPageId:t.redirectData.pageId,userSettingsStore:g,userRootStore:o})},disabled:x},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithChosenApps",defaultMessage:"Continue with {num} templates",values:{num:t.selectedPresets.length}})):r()(_.Z,{isLarge:!0,style:{height:40},onClick:async()=>{C(!0),await(0,w.lp)(h,t),"getting_started_page"===t.redirectData.type&&t.redirectData.pageId&&await(0,y.y3)({environment:h,spaceViewStore:i,redirectPageId:t.redirectData.pageId,userSettingsStore:g,userRootStore:o})},disabled:x},void 0,r()(v.FormattedMessage,{id:"apps.workspacesetup.button.continueWithoutChoosingApps",defaultMessage:"I'll add templates later"})))),r()("div",{style:R.right},void 0,j)))}}}]);